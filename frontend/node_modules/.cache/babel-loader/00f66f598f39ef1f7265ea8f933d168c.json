{"ast":null,"code":"/*! firebase-admin v8.8.0 */\n\"use strict\";\n/*!\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar error_1 = require(\"../utils/error\");\n\nvar credential_1 = require(\"../auth/credential\");\n\nvar validator = require(\"../utils/validator\");\n\nvar utils = require(\"../utils/index\");\n/**\n * Internals of a Firestore instance.\n */\n\n\nvar FirestoreInternals =\n/** @class */\nfunction () {\n  function FirestoreInternals() {}\n  /**\n   * Deletes the service and its associated resources.\n   *\n   * @return {Promise<()>} An empty Promise that will be fulfilled when the service is deleted.\n   */\n\n\n  FirestoreInternals.prototype.delete = function () {\n    // There are no resources to clean up.\n    return Promise.resolve();\n  };\n\n  return FirestoreInternals;\n}();\n\nvar FirestoreService =\n/** @class */\nfunction () {\n  function FirestoreService(app) {\n    this.INTERNAL = new FirestoreInternals();\n    this.firestoreClient = initFirestore(app);\n    this.appInternal = app;\n  }\n\n  Object.defineProperty(FirestoreService.prototype, \"app\", {\n    /**\n     * Returns the app associated with this Storage instance.\n     *\n     * @return {FirebaseApp} The app associated with this Storage instance.\n     */\n    get: function () {\n      return this.appInternal;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FirestoreService.prototype, \"client\", {\n    get: function () {\n      return this.firestoreClient;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return FirestoreService;\n}();\n\nexports.FirestoreService = FirestoreService;\n\nfunction getFirestoreOptions(app) {\n  if (!validator.isNonNullObject(app) || !('options' in app)) {\n    throw new error_1.FirebaseFirestoreError({\n      code: 'invalid-argument',\n      message: 'First argument passed to admin.firestore() must be a valid Firebase app instance.'\n    });\n  }\n\n  var projectId = utils.getProjectId(app);\n  var cert = credential_1.tryGetCertificate(app.options.credential);\n\n  var firebaseVersion = require('../../package.json').version;\n\n  if (cert != null) {\n    // cert is available when the SDK has been initialized with a service account JSON file,\n    // or by setting the GOOGLE_APPLICATION_CREDENTIALS envrionment variable.\n    if (!validator.isNonEmptyString(projectId)) {\n      // Assert for an explicit projct ID (either via AppOptions or the cert itself).\n      throw new error_1.FirebaseFirestoreError({\n        code: 'no-project-id',\n        message: 'Failed to determine project ID for Firestore. Initialize the ' + 'SDK with service account credentials or set project ID as an app option. ' + 'Alternatively set the GOOGLE_CLOUD_PROJECT environment variable.'\n      });\n    }\n\n    return {\n      credentials: {\n        private_key: cert.privateKey,\n        client_email: cert.clientEmail\n      },\n      projectId: projectId,\n      firebaseVersion: firebaseVersion\n    };\n  } else if (app.options.credential instanceof credential_1.ApplicationDefaultCredential) {\n    // Try to use the Google application default credentials.\n    // If an explicit project ID is not available, let Firestore client discover one from the\n    // environment. This prevents the users from having to set GOOGLE_CLOUD_PROJECT in GCP runtimes.\n    return validator.isNonEmptyString(projectId) ? {\n      projectId: projectId,\n      firebaseVersion: firebaseVersion\n    } : {\n      firebaseVersion: firebaseVersion\n    };\n  }\n\n  throw new error_1.FirebaseFirestoreError({\n    code: 'invalid-credential',\n    message: 'Failed to initialize Google Cloud Firestore client with the available credentials. ' + 'Must initialize the SDK with a certificate credential or application default credentials ' + 'to use Cloud Firestore API.'\n  });\n}\n\nexports.getFirestoreOptions = getFirestoreOptions;\n\nfunction initFirestore(app) {\n  var options = getFirestoreOptions(app);\n  var firestoreDatabase;\n\n  try {\n    // Lazy-load the Firestore implementation here, which in turns loads gRPC.\n    firestoreDatabase = require('@google-cloud/firestore').Firestore;\n  } catch (err) {\n    throw new error_1.FirebaseFirestoreError({\n      code: 'missing-dependencies',\n      message: 'Failed to import the Cloud Firestore client library for Node.js. ' + 'Make sure to install the \"@google-cloud/firestore\" npm package. ' + (\"Original error: \" + err)\n    });\n  }\n\n  return new firestoreDatabase(options);\n}","map":{"version":3,"sources":["/home/strider/Desktop/github/klaviyo-weather-powered-email/frontend/node_modules/firebase-admin/lib/firestore/firestore.js"],"names":["Object","defineProperty","exports","value","error_1","require","credential_1","validator","utils","FirestoreInternals","prototype","delete","Promise","resolve","FirestoreService","app","INTERNAL","firestoreClient","initFirestore","appInternal","get","enumerable","configurable","getFirestoreOptions","isNonNullObject","FirebaseFirestoreError","code","message","projectId","getProjectId","cert","tryGetCertificate","options","credential","firebaseVersion","version","isNonEmptyString","credentials","private_key","privateKey","client_email","clientEmail","ApplicationDefaultCredential","firestoreDatabase","Firestore","err"],"mappings":"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","sourcesContent":["/*! firebase-admin v8.8.0 */\n\"use strict\";\n/*!\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar error_1 = require(\"../utils/error\");\nvar credential_1 = require(\"../auth/credential\");\nvar validator = require(\"../utils/validator\");\nvar utils = require(\"../utils/index\");\n/**\n * Internals of a Firestore instance.\n */\nvar FirestoreInternals = /** @class */ (function () {\n    function FirestoreInternals() {\n    }\n    /**\n     * Deletes the service and its associated resources.\n     *\n     * @return {Promise<()>} An empty Promise that will be fulfilled when the service is deleted.\n     */\n    FirestoreInternals.prototype.delete = function () {\n        // There are no resources to clean up.\n        return Promise.resolve();\n    };\n    return FirestoreInternals;\n}());\nvar FirestoreService = /** @class */ (function () {\n    function FirestoreService(app) {\n        this.INTERNAL = new FirestoreInternals();\n        this.firestoreClient = initFirestore(app);\n        this.appInternal = app;\n    }\n    Object.defineProperty(FirestoreService.prototype, \"app\", {\n        /**\n         * Returns the app associated with this Storage instance.\n         *\n         * @return {FirebaseApp} The app associated with this Storage instance.\n         */\n        get: function () {\n            return this.appInternal;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(FirestoreService.prototype, \"client\", {\n        get: function () {\n            return this.firestoreClient;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return FirestoreService;\n}());\nexports.FirestoreService = FirestoreService;\nfunction getFirestoreOptions(app) {\n    if (!validator.isNonNullObject(app) || !('options' in app)) {\n        throw new error_1.FirebaseFirestoreError({\n            code: 'invalid-argument',\n            message: 'First argument passed to admin.firestore() must be a valid Firebase app instance.',\n        });\n    }\n    var projectId = utils.getProjectId(app);\n    var cert = credential_1.tryGetCertificate(app.options.credential);\n    var firebaseVersion = require('../../package.json').version;\n    if (cert != null) {\n        // cert is available when the SDK has been initialized with a service account JSON file,\n        // or by setting the GOOGLE_APPLICATION_CREDENTIALS envrionment variable.\n        if (!validator.isNonEmptyString(projectId)) {\n            // Assert for an explicit projct ID (either via AppOptions or the cert itself).\n            throw new error_1.FirebaseFirestoreError({\n                code: 'no-project-id',\n                message: 'Failed to determine project ID for Firestore. Initialize the '\n                    + 'SDK with service account credentials or set project ID as an app option. '\n                    + 'Alternatively set the GOOGLE_CLOUD_PROJECT environment variable.',\n            });\n        }\n        return {\n            credentials: {\n                private_key: cert.privateKey,\n                client_email: cert.clientEmail,\n            },\n            projectId: projectId,\n            firebaseVersion: firebaseVersion,\n        };\n    }\n    else if (app.options.credential instanceof credential_1.ApplicationDefaultCredential) {\n        // Try to use the Google application default credentials.\n        // If an explicit project ID is not available, let Firestore client discover one from the\n        // environment. This prevents the users from having to set GOOGLE_CLOUD_PROJECT in GCP runtimes.\n        return validator.isNonEmptyString(projectId) ? { projectId: projectId, firebaseVersion: firebaseVersion } : { firebaseVersion: firebaseVersion };\n    }\n    throw new error_1.FirebaseFirestoreError({\n        code: 'invalid-credential',\n        message: 'Failed to initialize Google Cloud Firestore client with the available credentials. ' +\n            'Must initialize the SDK with a certificate credential or application default credentials ' +\n            'to use Cloud Firestore API.',\n    });\n}\nexports.getFirestoreOptions = getFirestoreOptions;\nfunction initFirestore(app) {\n    var options = getFirestoreOptions(app);\n    var firestoreDatabase;\n    try {\n        // Lazy-load the Firestore implementation here, which in turns loads gRPC.\n        firestoreDatabase = require('@google-cloud/firestore').Firestore;\n    }\n    catch (err) {\n        throw new error_1.FirebaseFirestoreError({\n            code: 'missing-dependencies',\n            message: 'Failed to import the Cloud Firestore client library for Node.js. '\n                + 'Make sure to install the \"@google-cloud/firestore\" npm package. '\n                + (\"Original error: \" + err),\n        });\n    }\n    return new firestoreDatabase(options);\n}\n"]},"metadata":{},"sourceType":"script"}